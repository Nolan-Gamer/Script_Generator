<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GÃ©nÃ©rateur de Concept VidÃ©o</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .type-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .type-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }

        .type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .type-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .type-card p {
            opacity: 0.9;
            font-size: 0.9em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            margin-top: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            max-height: 500px;
            overflow-y: auto;
        }

        .btn-download {
            background: #28a745;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ GÃ©nÃ©rateur de Concept VidÃ©o</h1>

        <!-- Ã‰tape 1: Choix du type -->
        <div class="step active" id="step1">
            <h2 style="text-align: center; color: #333; margin-bottom: 20px;">Quel type de contenu souhaitez-vous crÃ©er ?</h2>
            <div class="type-selector">
                <div class="type-card" onclick="selectType('sketch')">
                    <h3>ğŸ˜‚ Sketch</h3>
                    <p>Courte scÃ¨ne humoristique</p>
                </div>
                <div class="type-card" onclick="selectType('video')">
                    <h3>ğŸ“¹ VidÃ©o</h3>
                    <p>Contenu vidÃ©o classique</p>
                </div>
                <div class="type-card" onclick="selectType('court-metrage')">
                    <h3>ğŸï¸ Court-MÃ©trage</h3>
                    <p>Film artistique court</p>
                </div>
                <div class="type-card" onclick="selectType('serie')">
                    <h3>ğŸ“º SÃ©rie</h3>
                    <p>Ã‰pisodes multiples</p>
                </div>
                <div class="type-card" onclick="selectType('film')">
                    <h3>ğŸ¥ Film</h3>
                    <p>Long mÃ©trage complet</p>
                </div>
                <div class="type-card" onclick="selectType('musique')">
                    <h3>ğŸµ Musique</h3>
                    <p>Paroles de chanson</p>
                </div>
                <div class="type-card" onclick="selectType('midi')">
                    <h3>ğŸ¹ GÃ©nÃ©rateur MIDI</h3>
                    <p>Fichier MIDI instrumental</p>
                </div>
            </div>
        </div>

        <!-- Ã‰tape 2: DÃ©tails -->
        <div class="step" id="step2">
            <h2 style="color: #333; margin-bottom: 20px;">DÃ©tails du projet</h2>
            <form id="detailsForm">
                <div class="form-group">
                    <label for="title">Titre ou thÃ¨me :</label>
                    <input type="text" id="title" placeholder="Ex: Une journÃ©e au bureau" required>
                </div>

                <div class="form-group">
                    <label for="genre">Genre :</label>
                    <select id="genre" required>
                        <option value="">SÃ©lectionnez un genre</option>
                        <option value="comÃ©die">ComÃ©die</option>
                        <option value="drame">Drame</option>
                        <option value="action">Action</option>
                        <option value="thriller">Thriller</option>
                        <option value="horreur">Horreur</option>
                        <option value="science-fiction">Science-fiction</option>
                        <option value="fantaisie">Fantaisie</option>
                        <option value="romance">Romance</option>
                        <option value="documentaire">Documentaire</option>
                        <option value="pop">Pop</option>
                        <option value="rock">Rock</option>
                        <option value="rap">Rap/Hip-hop</option>
                        <option value="rnb">R&B</option>
                        <option value="electro">Ã‰lectro</option>
                        <option value="folk">Folk</option>
                        <option value="jazz">Jazz</option>
                        <option value="metal">Metal</option>
                        <option value="reggae">Reggae</option>
                        <option value="country">Country</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="tone">Ton/Ambiance :</label>
                    <input type="text" id="tone" placeholder="Ex: LÃ©ger et humoristique, sombre et intense" required>
                </div>

                <div class="form-group">
                    <label for="description">Description ou idÃ©e principale :</label>
                    <textarea id="description" placeholder="DÃ©crivez votre idÃ©e en quelques phrases..." required></textarea>
                </div>

                <div class="form-group" id="numCharactersGroup">
                    <label for="numCharacters"><span id="numCharactersLabel">Nombre de personnages principaux :</span></label>
                    <input type="number" id="numCharacters" min="1" max="10" value="3" required>
                </div>

                <div class="form-group" id="tempoGroup" style="display:none;">
                    <label for="tempo">Tempo souhaitÃ© (BPM) :</label>
                    <input type="number" id="tempo" min="60" max="200" value="120" placeholder="Ex: 120">
                    <small style="color: #666;">Lent: 60-90 | ModÃ©rÃ©: 90-120 | Rapide: 120-180</small>
                </div>

                <button type="submit" class="btn">
                    <span id="submitBtnText">GÃ©nÃ©rer le concept ğŸš€</span>
                </button>
                <button type="button" class="btn btn-secondary" onclick="goToStep(1)">Retour</button>
            </form>
        </div>

        <!-- Ã‰tape 2b: DÃ©tails des artistes (pour musique) -->
        <div class="step" id="step2b">
            <h2 style="color: #333; margin-bottom: 20px;">DÃ©tails des artistes</h2>
            <div id="artistsContainer"></div>
            <button class="btn" onclick="submitArtists()">Continuer vers la gÃ©nÃ©ration ğŸµ</button>
            <button class="btn btn-secondary" onclick="goToStep(2)">Retour</button>
        </div>

        <!-- Ã‰tape 2c: Upload WAV pour MIDI -->
        <div class="step" id="step2c">
            <h2 style="color: #333; margin-bottom: 20px;">ğŸ¹ GÃ©nÃ©rateur MIDI</h2>
            
            <div class="form-group">
                <label for="wavFile">Fichier audio vocal (WAV) :</label>
                <input type="file" id="wavFile" accept=".wav,audio/wav" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                <small style="color: #666;">Uploadez un fichier WAV contenant uniquement la voix (a cappella)</small>
            </div>

            <div class="form-group">
                <label for="midiTempo">Tempo dÃ©sirÃ© (BPM) :</label>
                <input type="number" id="midiTempo" min="60" max="200" value="120" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                <small style="color: #666;">Lent: 60-90 | ModÃ©rÃ©: 90-120 | Rapide: 120-180</small>
            </div>

            <div class="form-group">
                <label for="midiGenre">Style d'instrumentation :</label>
                <select id="midiGenre" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="pop">Pop - Piano, SynthÃ©s, Batterie</option>
                    <option value="rock">Rock - Guitares, Basse, Batterie</option>
                    <option value="electronic">Electronic - SynthÃ©s, Basse 808, Pads</option>
                    <option value="jazz">Jazz - Piano, Contrebasse, Batterie douce</option>
                    <option value="orchestral">Orchestral - Cordes, Cuivres, Timbales</option>
                    <option value="ambient">Ambient - Pads atmosphÃ©riques, Textures</option>
                    <option value="funk">Funk - Basse groovy, Guitare wah, Cuivres</option>
                    <option value="minimal">Minimal - Instrumentation Ã©purÃ©e</option>
                </select>
            </div>

            <div class="form-group">
                <label for="midiKey">TonalitÃ© :</label>
                <select id="midiKey" required style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="C">Do Majeur (C)</option>
                    <option value="Cm">Do mineur (Cm)</option>
                    <option value="G">Sol Majeur (G)</option>
                    <option value="Gm">Sol mineur (Gm)</option>
                    <option value="D">RÃ© Majeur (D)</option>
                    <option value="Dm">RÃ© mineur (Dm)</option>
                    <option value="A">La Majeur (A)</option>
                    <option value="Am">La mineur (Am)</option>
                    <option value="E">Mi Majeur (E)</option>
                    <option value="Em">Mi mineur (Em)</option>
                    <option value="F">Fa Majeur (F)</option>
                    <option value="Fm">Fa mineur (Fm)</option>
                </select>
            </div>

            <button class="btn" onclick="generateMIDI()">GÃ©nÃ©rer le fichier MIDI ğŸ¹</button>
            <button class="btn btn-secondary" onclick="goToStep(1)">Retour</button>
        </div>

        <!-- Ã‰tape 3: GÃ©nÃ©ration -->
        <div class="step" id="step3">
            <div class="loading">
                <div class="spinner"></div>
                <p>GÃ©nÃ©ration de votre concept en cours...</p>
                <p style="color: #666; margin-top: 10px;">CrÃ©ation des personnages et du script...</p>
            </div>
        </div>

        <!-- Ã‰tape 4: RÃ©sultat -->
        <div class="step" id="step4">
            <h2 style="color: #333; margin-bottom: 20px;">Votre concept est prÃªt !</h2>
            <div class="result" id="result"></div>
            <button class="btn btn-download" onclick="downloadConcept()">TÃ©lÃ©charger le fichier TXT ğŸ“¥</button>
            <button class="btn btn-secondary" onclick="restart()">Nouveau concept</button>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedType = '';
        let generatedConcept = '';
        let artistsData = [];
        let projectData = {};

        function goToStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            currentStep = step;
        }

        function selectType(type) {
            selectedType = type;
            const numCharGroup = document.getElementById('numCharactersGroup');
            const numCharLabel = document.getElementById('numCharactersLabel');
            const tempoGroup = document.getElementById('tempoGroup');
            const submitBtnText = document.getElementById('submitBtnText');
            
            if (type === 'musique') {
                numCharGroup.style.display = 'block';
                numCharLabel.textContent = 'Nombre d\'artistes/personnes :';
                tempoGroup.style.display = 'block';
                document.getElementById('numCharacters').required = true;
                document.getElementById('numCharacters').value = 1;
                submitBtnText.textContent = 'Continuer ğŸµ';
            } else if (type === 'midi') {
                // Aller directement Ã  la page MIDI
                goToStep('2c');
                return;
            } else {
                numCharGroup.style.display = 'block';
                numCharLabel.textContent = 'Nombre de personnages principaux :';
                tempoGroup.style.display = 'none';
                document.getElementById('numCharacters').required = true;
                document.getElementById('numCharacters').value = 3;
                submitBtnText.textContent = 'GÃ©nÃ©rer le concept ğŸš€';
            }
            goToStep(2);
        }

        document.getElementById('detailsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Sauvegarder les donnÃ©es du projet
            projectData = {
                title: document.getElementById('title').value,
                genre: document.getElementById('genre').value,
                tone: document.getElementById('tone').value,
                description: document.getElementById('description').value,
                numCharacters: parseInt(document.getElementById('numCharacters').value),
                tempo: document.getElementById('tempo').value || '120'
            };
            
            if (selectedType === 'musique') {
                // Aller Ã  la page de dÃ©tails des artistes
                createArtistsForms();
                goToStep('2b');
            } else {
                generateConcept();
            }
        });

        function createArtistsForms() {
            const container = document.getElementById('artistsContainer');
            container.innerHTML = '';
            artistsData = [];
            
            const numArtists = projectData.numCharacters;
            
            for (let i = 0; i < numArtists; i++) {
                const artistCard = document.createElement('div');
                artistCard.style.cssText = `
                    background: #f8f9fa;
                    padding: 20px;
                    border-radius: 10px;
                    margin-bottom: 20px;
                    border: 2px solid #e0e0e0;
                `;
                
                artistCard.innerHTML = `
                    <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ¤ ${numArtists > 1 ? 'Artiste ' + (i + 1) : 'Artiste'}</h3>
                    
                    <div class="form-group">
                        <label for="artistName${i}">Nom de l'artiste :</label>
                        <input type="text" id="artistName${i}" placeholder="Ex: DJ Shadow" required style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    </div>
                    
                    <div class="form-group">
                        <label for="artistRole${i}">RÃ´le/Instrument :</label>
                        <select id="artistRole${i}" style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <option value="Chant principal">Chant principal</option>
                            <option value="Chant secondaire">Chant secondaire</option>
                            <option value="Rap">Rap</option>
                            <option value="Guitare">Guitare</option>
                            <option value="Basse">Basse</option>
                            <option value="Batterie">Batterie</option>
                            <option value="Piano/Clavier">Piano/Clavier</option>
                            <option value="SynthÃ©tiseur">SynthÃ©tiseur</option>
                            <option value="DJ/Production">DJ/Production</option>
                            <option value="Saxophone">Saxophone</option>
                            <option value="Trompette">Trompette</option>
                            <option value="Violon">Violon</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="hasPlatform${i}" onchange="togglePlatformFields(${i})" style="margin-right: 10px; width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-weight: 600;">Est prÃ©sent sur une plateforme</span>
                        </label>
                    </div>
                    
                    <div id="platformFields${i}" style="display: none; margin-top: 15px; padding: 15px; background: white; border-radius: 8px;">
                        <div class="form-group">
                            <label for="platform${i}">Plateforme :</label>
                            <select id="platform${i}" style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                                <option value="YouTube">YouTube</option>
                                <option value="Spotify">Spotify</option>
                                <option value="SoundCloud">SoundCloud</option>
                                <option value="Apple Music">Apple Music</option>
                                <option value="Instagram">Instagram</option>
                                <option value="TikTok">TikTok</option>
                                <option value="Bandcamp">Bandcamp</option>
                                <option value="Deezer">Deezer</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="platformLink${i}">Lien de la plateforme :</label>
                            <input type="url" id="platformLink${i}" placeholder="https://..." style="width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        </div>
                    </div>
                `;
                
                container.appendChild(artistCard);
            }
        }

        function togglePlatformFields(index) {
            const checkbox = document.getElementById('hasPlatform' + index);
            const fields = document.getElementById('platformFields' + index);
            fields.style.display = checkbox.checked ? 'block' : 'none';
        }

        function submitArtists() {
            artistsData = [];
            const numArtists = projectData.numCharacters;
            
            for (let i = 0; i < numArtists; i++) {
                const name = document.getElementById('artistName' + i).value;
                const role = document.getElementById('artistRole' + i).value;
                const hasPlatform = document.getElementById('hasPlatform' + i).checked;
                
                if (!name) {
                    alert('Veuillez renseigner le nom de tous les artistes');
                    return;
                }
                
                const artistInfo = {
                    name: name,
                    role: role,
                    hasPlatform: hasPlatform
                };
                
                if (hasPlatform) {
                    artistInfo.platform = document.getElementById('platform' + i).value;
                    artistInfo.platformLink = document.getElementById('platformLink' + i).value;
                }
                
                artistsData.push(artistInfo);
            }
            
            generateConcept();
        }

        function generateConcept() {
            goToStep(3);

            const title = projectData.title || document.getElementById('title').value;
            const genre = projectData.genre || document.getElementById('genre').value;
            const tone = projectData.tone || document.getElementById('tone').value;
            const description = projectData.description || document.getElementById('description').value;
            const numCharacters = projectData.numCharacters || parseInt(document.getElementById('numCharacters').value);
            const tempo = projectData.tempo || document.getElementById('tempo').value || '120';

            setTimeout(() => {
                if (selectedType === 'musique') {
                    generatedConcept = createSongLyrics(title, genre, tone, description, tempo, artistsData);
                } else {
                    generatedConcept = createConcept(selectedType, title, genre, tone, description, numCharacters);
                }
                document.getElementById('result').textContent = generatedConcept;
                goToStep(4);
            }, 2000);
        }

        function createConcept(type, title, genre, tone, description, numChars) {
            const typeNames = {
                'sketch': 'SKETCH',
                'video': 'VIDÃ‰O',
                'court-metrage': 'COURT-MÃ‰TRAGE',
                'serie': 'SÃ‰RIE',
                'film': 'FILM',
                'musique': 'MUSIQUE'
            };

            let concept = `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CONCEPT ${typeNames[type].toUpperCase()}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TITRE : ${title}
TYPE : ${typeNames[type]}
GENRE : ${genre.charAt(0).toUpperCase() + genre.slice(1)}
TON : ${tone}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    SYNOPSIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

${description}

`;

            if (type === 'serie') {
                concept += `
STRUCTURE : SÃ©rie de 6 Ã©pisodes de 25 minutes
SAISON : Saison 1

`;
            } else if (type === 'film') {
                concept += `
DURÃ‰E : 90-120 minutes
FORMAT : Long mÃ©trage

`;
            } else if (type === 'court-metrage') {
                concept += `
DURÃ‰E : 15-30 minutes
FORMAT : Court-mÃ©trage artistique
FESTIVALS : Cannes Court MÃ©trage, Clermont-Ferrand, etc.

`;
            } else if (type === 'sketch') {
                concept += `
DURÃ‰E : 3-5 minutes
FORMAT : Sketch humoristique

`;
            } else {
                concept += `
DURÃ‰E : 10-15 minutes
FORMAT : VidÃ©o standalone

`;
            }

            concept += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PERSONNAGES PRINCIPAUX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

`;

            const characterNames = [
                { name: 'Alex', traits: 'Optimiste, maladroit, attachant' },
                { name: 'Marie', traits: 'Pragmatique, sarcastique, loyale' },
                { name: 'Lucas', traits: 'Intellectuel, timide, crÃ©atif' },
                { name: 'Sophie', traits: 'Dynamique, impulsive, courageuse' },
                { name: 'Thomas', traits: 'MystÃ©rieux, charismatique, rusÃ©' },
                { name: 'Emma', traits: 'Sensible, dÃ©terminÃ©e, empathique' },
                { name: 'Noah', traits: 'Rebelle, drÃ´le, spontanÃ©' },
                { name: 'ChloÃ©', traits: 'Perfectionniste, ambitieuse, stratÃ¨ge' }
            ];

            for (let i = 0; i < numChars && i < characterNames.length; i++) {
                const char = characterNames[i];
                concept += `
${i + 1}. ${char.name.toUpperCase()}
   PersonnalitÃ© : ${char.traits}
   RÃ´le : ${i === 0 ? 'Protagoniste principal' : i === 1 ? 'Protagoniste secondaire' : 'Personnage de soutien'}
   Arc narratif : Ã‰volution Ã  travers l'histoire
`;
            }

            concept += `

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    STRUCTURE NARRATIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`;

            if (type === 'serie') {
                concept += `

Ã‰PISODE 1 - "Le Commencement"
â€¢ Acte 1 : Introduction des personnages et du contexte
â€¢ Acte 2 : Premier conflit majeur
â€¢ Acte 3 : Cliffhanger qui mÃ¨ne Ã  l'Ã©pisode suivant

Ã‰PISODE 2-5 : DÃ©veloppement progressif des arcs narratifs
Ã‰PISODE 6 : RÃ©solution de la saison avec ouverture sur la suite
`;
            } else {
                concept += `

ACTE 1 - MISE EN PLACE (25%)
â€¢ PrÃ©sentation du monde et des personnages
â€¢ Incident dÃ©clencheur qui lance l'histoire
â€¢ Point de non-retour

ACTE 2 - CONFRONTATION (50%)
â€¢ Obstacles et complications croissantes
â€¢ DÃ©veloppement des relations entre personnages
â€¢ Point mÃ©dian : rÃ©vÃ©lation majeure
â€¢ "Tout est perdu" - moment le plus sombre

ACTE 3 - RÃ‰SOLUTION (25%)
â€¢ Plan final et confrontation climax
â€¢ RÃ©solution des arcs narratifs
â€¢ DÃ©nouement et nouvelle normalitÃ©
`;
            }

            concept += `

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    EXEMPLE DE SCÃˆNE CLÃ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INT. ${type === 'sketch' ? 'BUREAU' : 'LIEU PRINCIPAL'} - JOUR

${characterNames[0].name.toUpperCase()} entre prÃ©cipitamment.

                    ${characterNames[0].name.toUpperCase()}
          On a un problÃ¨me !

${characterNames[1].name.toUpperCase()} lÃ¨ve les yeux de son travail.

                    ${characterNames[1].name.toUpperCase()}
          Encore ? Qu'est-ce qui se passe
          cette fois ?

                    ${characterNames[0].name.toUpperCase()}
          ${type === 'sketch' ? 'J\'ai accidentellement...' : 'Tout va changer. Ils arrivent...'}

Un moment de silence tendu.

                    ${characterNames[1].name.toUpperCase()}
          ${type === 'sketch' ? 'Tu es sÃ©rieux ?' : 'Alors c\'est vraiment en train d\'arriver.'}
          ${type === 'sketch' ? '' : 'On doit agir maintenant.'}

${characterNames[0].name.toUpperCase()} hoche la tÃªte gravement.

[La scÃ¨ne Ã©tablit le conflit central et la dynamique entre personnages]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    THÃˆMES PRINCIPAUX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ L'importance des relations humaines
â€¢ La rÃ©silience face Ã  l'adversitÃ©
â€¢ La dÃ©couverte de soi
â€¢ ${genre === 'comÃ©die' ? 'L\'humour dans les situations quotidiennes' : 'Les consÃ©quences de nos choix'}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    NOTES DE PRODUCTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LIEUX PRINCIPAUX :
â€¢ Lieu principal 1 : 40% des scÃ¨nes
â€¢ Lieu secondaire 1 : 30% des scÃ¨nes
â€¢ Lieux divers : 30% des scÃ¨nes

AMBIANCE VISUELLE :
â€¢ Palette de couleurs : ${tone.includes('sombre') ? 'Tons froids et dÃ©saturÃ©s' : 'Tons chauds et vibrants'}
â€¢ Style de camÃ©ra : ${type === 'sketch' ? 'Dynamique et mobile' : 'CinÃ©matographique avec plans soignÃ©s'}
â€¢ Ã‰clairage : ${tone.includes('lÃ©ger') ? 'Lumineux et naturel' : 'ContrastÃ© avec ombres prononcÃ©es'}

MUSIQUE ET SON :
â€¢ Score original suggÃ©rÃ© : ${genre === 'comÃ©die' ? 'LÃ©ger et entraÃ®nant' : 'AtmosphÃ©rique et Ã©motionnel'}
â€¢ Ã‰lÃ©ments sonores clÃ©s : Ambiances qui renforcent l'immersion

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PUBLIC CIBLE ET DISTRIBUTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Public cible : ${genre === 'comÃ©die' ? '16-35 ans' : '18-45 ans'}
Plateformes : ${type === 'sketch' ? 'YouTube, TikTok, Instagram' : type === 'serie' ? 'Netflix, Prime Video, plateformes de streaming' : 'Festivals, salles de cinÃ©ma, VOD'}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Concept gÃ©nÃ©rÃ© le ${new Date().toLocaleDateString('fr-FR')}
PrÃªt pour le dÃ©veloppement et la production !

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;

            return concept;
        }

        function createSongLyrics(title, genre, tone, description, tempo, artists) {
            let lyrics = `â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                      PAROLES DE CHANSON
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

TITRE : ${title}
GENRE : ${genre.charAt(0).toUpperCase() + genre.slice(1)}
AMBIANCE : ${tone}
THÃˆME : ${description}
TEMPO : ${tempo} BPM

â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                    ARTISTES & CRÃ‰DITS
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

`;

            artists.forEach((artist, index) => {
                lyrics += `${index + 1}. ${artist.name.toUpperCase()}
   RÃ´le : ${artist.role}
`;
                if (artist.hasPlatform) {
                    lyrics += `   Plateforme : ${artist.platform}
   Lien : ${artist.platformLink}
`;
                }
                lyrics += `
`;
            });

            lyrics += `
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                         STRUCTURE
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

Format : Couplet - Refrain - Couplet - Refrain - Pont - Refrain Final
DurÃ©e estimÃ©e : 3-4 minutes
Tempo : ${tempo} BPM (${parseInt(tempo) < 90 ? 'Lent' : parseInt(tempo) < 120 ? 'ModÃ©rÃ©' : 'Rapide'})


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                    [INTRO INSTRUMENTALE]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${generateInstrumentalIntro(genre, artists, tempo)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                       [COUPLET 1]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${artists.some(a => a.role.includes('Chant') || a.role === 'Rap') ? `[${artists.find(a => a.role.includes('Chant') || a.role === 'Rap').name}]` : '[Voix principale]'}
${generateVerse(tone, genre, 1)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                     [PRÃ‰-REFRAIN]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${generatePreChorus(tone, genre)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                       [REFRAIN]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${artists.length > 1 && artists.filter(a => a.role.includes('Chant')).length > 1 ? '[Tous ensemble]' : ''}
${generateChorus(title, tone, genre)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                       [COUPLET 2]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${artists.some(a => a.role.includes('Chant') || a.role === 'Rap') ? `[${artists.find(a => a.role.includes('Chant') || a.role === 'Rap').name}]` : '[Voix principale]'}
${generateVerse(tone, genre, 2)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                     [PRÃ‰-REFRAIN]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${generatePreChorus(tone, genre)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                       [REFRAIN]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${artists.length > 1 && artists.filter(a => a.role.includes('Chant')).length > 1 ? '[Tous ensemble]' : ''}
${generateChorus(title, tone, genre)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                         [PONT]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${generateBridgeWithInstruments(tone, genre, artists)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                    [REFRAIN FINAL]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${artists.length > 1 && artists.filter(a => a.role.includes('Chant')).length > 1 ? '[Tous ensemble]' : ''}
${generateChorus(title, tone, genre)}

${genre === 'pop' || genre === 'rnb' ? '\n(RÃ©pÃ©tition du refrain avec ad-libs)\n' + generateChorus(title, tone, genre) : ''}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                   [OUTRO INSTRUMENTALE]
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

${generateOutro(genre, artists)}


â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                    NOTES DE PRODUCTION
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

INSTRUMENTATION UTILISÃ‰E :
${generateInstrumentationFromArtists(artists, genre)}

ARRANGEMENT :
â€¢ Introduction : MontÃ©e progressive de l'Ã©nergie (${Math.round(parseInt(tempo) * 8 / 120 * 4)} mesures)
â€¢ Couplets : Instrumentation plus lÃ©gÃ¨re pour mettre en avant les paroles
â€¢ Refrains : Full instrumentation, mÃ©morable et accrocheur
â€¢ Pont : ${artists.some(a => ['Guitare', 'Piano/Clavier', 'Saxophone'].includes(a.role)) ? `Solo de ${artists.find(a => ['Guitare', 'Piano/Clavier', 'Saxophone'].includes(a.role)).role.toLowerCase()}` : 'Changement de tonalitÃ©'} pour crÃ©er du contraste
â€¢ Outro : RÃ©solution satisfaisante

RÃ”LES DANS LA PRODUCTION :
${artists.map((a, i) => `â€¢ ${a.name} : ${a.role}${i === 0 ? ' (Lead)' : ''}`).join('\n')}

VOIX :
â€¢ Style vocal : ${genre === 'rap' ? 'Flow rythmÃ© et percutant' : 
                 genre === 'rnb' ? 'MÃ©lismes et ornamentations vocales' :
                 genre === 'rock' ? 'Puissant et Ã©nergique' :
                 genre === 'folk' ? 'Naturel et storytelling' :
                 'MÃ©lodieux et expressif'}
â€¢ Harmonies : ${artists.filter(a => a.role.includes('Chant')).length > 1 ? 'Riches harmonies vocales entre les artistes' : 'Soutien ponctuel'}

PRODUCTION :
â€¢ Mix : ${tone.includes('sombre') ? 'Reverb importante, sons plus graves' : 'Clair et dynamique'}
â€¢ Mastering : ${genre === 'electro' || genre === 'rap' ? 'Basses prononcÃ©es' : 'Ã‰quilibrÃ©'}
â€¢ Tempo : ${tempo} BPM - ${parseInt(tempo) < 90 ? 'Ambiance calme et contemplative' : parseInt(tempo) < 120 ? 'Rythme modÃ©rÃ© et accessible' : 'Ã‰nergie Ã©levÃ©e et dansant'}

â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«
                    PUBLIC CIBLE
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

Audience : ${genre === 'pop' ? 'Grand public, 13-35 ans' :
            genre === 'rap' ? '15-30 ans, culture urbaine' :
            genre === 'rock' ? '18-45 ans, amateurs de rock' :
            genre === 'folk' ? '25-50 ans, mÃ©lomanes' :
            genre === 'rnb' ? '18-40 ans, R&B/Soul lovers' :
            '18-40 ans, passionnÃ©s du genre'}

Plateformes de diffusion :
`;
            
            const platforms = [...new Set(artists.filter(a => a.hasPlatform).map(a => a.platform))];
            if (platforms.length > 0) {
                lyrics += `â€¢ PrÃ©sence confirmÃ©e : ${platforms.join(', ')}\n`;
            }
            lyrics += `â€¢ RecommandÃ©es : Spotify, Apple Music, YouTube, Deezer
â€¢ Radio : ${genre === 'pop' ? 'Format radio commercial' : 
         genre === 'rap' ? 'Radios urbaines' :
         genre === 'rock' ? 'Radios rock' :
         'Radios spÃ©cialisÃ©es'}

LIENS DES ARTISTES :
`;
            
            artists.forEach(artist => {
                if (artist.hasPlatform) {
                    lyrics += `â€¢ ${artist.name} sur ${artist.platform} : ${artist.platformLink}\n`;
                }
            });

            lyrics += `
â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«

Paroles crÃ©Ã©es le ${new Date().toLocaleDateString('fr-FR')}
PrÃªt pour l'enregistrement en studio !

Â© Tous droits rÃ©servÃ©s

â™«â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â™«`;

            return lyrics;
        }

        function generateInstrumentalIntro(genre, artists, tempo) {
            const instruments = artists.map(a => a.role).filter(r => !r.includes('Chant'));
            if (instruments.length === 0) {
                return genre === 'rock' ? '[Guitare Ã©lectrique - 8 mesures]' : 
                       genre === 'pop' ? '[SynthÃ© et batterie - 8 mesures]' : 
                       '[Instrumentation - 8 mesures]';
            }
            
            const bars = Math.round(parseInt(tempo) * 8 / 120 * 4);
            return `[${instruments.join(', ')} - ${bars} mesures]
MontÃ©e progressive avec entrÃ©e successive des instruments`;
        }

        function generateBridgeWithInstruments(tone, genre, artists) {
            const soloInstruments = artists.filter(a => ['Guitare', 'Piano/Clavier', 'Saxophone', 'Trompette', 'Violon'].includes(a.role));
            
            if (soloInstruments.length > 0 && genre !== 'rap') {
                const soloist = soloInstruments[0];
                return `[Solo de ${soloist.role.toLowerCase()} - ${soloist.name} - 8 mesures]

Et mÃªme si le monde nous tourne le dos
On restera debout, on sera les plus hauts !

[Build-up vers refrain final]`;
            } else if (genre === 'rap') {
                return `(Ralentissement du tempo)
On a fait du chemin, on en fera encore
Chaque pas qu'on fait, c'est un nouveau record
Les doutes s'effacent quand on reste solidaires
(Reprise du tempo)
Et on repart de plus belle, vers la lumiÃ¨re !`;
            } else {
                return `Oh oh oh, oh oh oh
Le futur nous appartient
Oh oh oh, oh oh oh
On tient le monde dans nos mains
(Build-up instrumental)`;
            }
        }

        function generateOutro(genre, artists) {
            const instruments = artists.filter(a => ['Guitare', 'Piano/Clavier', 'Saxophone'].includes(a.role));
            if (instruments.length > 0) {
                return `[Fade out sur ${instruments[0].role.toLowerCase()} - ${instruments[0].name}]`;
            }
            return genre === 'rock' ? '[Fade out sur solo de guitare]' : 
                   genre === 'pop' ? '[Diminution progressive avec vocaux]' : 
                   '[Fade out instrumental]';
        }

        function generateInstrumentationFromArtists(artists, genre) {
            let instrumentation = '';
            
            artists.forEach(artist => {
                instrumentation += `â€¢ ${artist.role} - ${artist.name}\n`;
            });
            
            // Ajouter des suggestions d'instruments manquants selon le genre
            const existingRoles = artists.map(a => a.role);
            const suggestions = [];
            
            if (genre === 'rock' && !existingRoles.some(r => r.includes('Batterie'))) {
                suggestions.push('â€¢ Batterie (suggÃ©rÃ© pour complÃ©ter le groupe)');
            }
            if ((genre === 'pop' || genre === 'electro') && !existingRoles.some(r => r.includes('SynthÃ©tiseur'))) {
                suggestions.push('â€¢ SynthÃ©tiseur (suggÃ©rÃ© pour l\'ambiance)');
            }
            if (genre === 'jazz' && !existingRoles.some(r => r.includes('Saxophone'))) {
                suggestions.push('â€¢ Saxophone (suggÃ©rÃ© pour l\'authenticitÃ© jazz)');
            }
            
            if (suggestions.length > 0) {
                instrumentation += '\nINSTRUMENTS SUPPLÃ‰MENTAIRES SUGGÃ‰RÃ‰S :\n' + suggestions.join('\n');
            }
            
            return instrumentation;
        }

        function generateVerse(tone, genre, verseNum) {
            if (genre === 'rap') {
                return verseNum === 1 ? 
`J'me lÃ¨ve le matin, nouvelle journÃ©e commence
Les dÃ©fis Ã  relever, j'ai confiance en ma chance
Pas le temps de douter, faut avancer sans relÃ¢che
Chaque obstacle surmontÃ©, c'est une nouvelle attache` :
`Les moments difficiles forgent qui on devient
Regarder vers demain, jamais vers hier matin
On construit notre histoire, ligne aprÃ¨s ligne
Chaque rime, chaque mot, porte notre insigne`;
            } else if (genre === 'folk') {
                return verseNum === 1 ?
`Sur les chemins de terre oÃ¹ le vent murmure
Je marche doucement sous le ciel qui s'azure
Les souvenirs dansent comme des feuilles d'automne
Et mon cÅ“ur se rappelle ce que la vie nous donne` :
`Les saisons ont tournÃ©, les annÃ©es ont filÃ©
Mais restent ces moments qu'on ne peut oublier
Dans le creux de nos mains, la chaleur du prÃ©sent
Et l'espoir de demain qui rÃ©sonne, puissant`;
            } else {
                return verseNum === 1 ?
`Les lumiÃ¨res de la ville s'allument une Ã  une
Je pense Ã  tous ces rÃªves, ces espoirs, ces fortunes
Le temps passe si vite mais l'instant est prÃ©cieux
Chaque battement du cÅ“ur nous rapproche un peu mieux` :
`Les Ã©preuves traversÃ©es nous ont rendus plus forts
On a appris Ã  tomber pour se relever encore
Et maintenant qu'on sait oÃ¹ notre place se trouve
Rien ne peut nous arrÃªter, notre Ã©lan se renouve`;
            }
        }

        function generatePreChorus(tone, genre) {
            if (genre === 'rap') {
                return `On garde la tÃªte haute, les yeux vers l'horizon
On trace notre route, on construit notre maison`;
            } else if (genre === 'rock') {
                return `Et je crie au monde entier (crie au monde)
Que rien ne peut nous briser (jamais nous briser)`;
            } else {
                return `Et quand tout semble perdu
On trouve en nous la force (on trouve la force)
D'aller toujours plus haut`;
            }
        }

        function generateChorus(title, tone, genre) {
            if (genre === 'rap') {
                return `${title}, c'est notre histoire Ã  nous
${title}, on la chante debout
On avance ensemble, unis jusqu'au bout
${title}, ouais c'est nous, c'est tout`;
            } else if (genre === 'rock') {
                return `${title} ! On ne lÃ¢che rien !
${title} ! C'est notre destin !
On va s'Ã©lever, toucher les Ã©toiles
${title}, on dÃ©ploie nos ailes, on prend le large !`;
            } else if (genre === 'folk') {
                return `${title}, comme une mÃ©lodie
Qui rÃ©sonne dans nos vies
${title}, doux et sincÃ¨re
Un refrain qui nous rassemble, qu'on prÃ©fÃ¨re`;
            } else {
                return `${title}, c'est le moment de briller
${title}, plus rien ne peut nous arrÃªter
On s'envole vers demain, le cÅ“ur lÃ©ger
${title}, ensemble on va y arriver`;
            }
        }

        function generateBridge(tone, genre) {
            if (genre === 'rap') {
                return `(Ralentissement du tempo)
On a fait du chemin, on en fera encore
Chaque pas qu'on fait, c'est un nouveau record
Les doutes s'effacent quand on reste solidaires
(Reprise du tempo)
Et on repart de plus belle, vers la lumiÃ¨re !`;
            } else if (genre === 'rock') {
                return `[Solo de guitare - 8 mesures]

Et mÃªme si le monde nous tourne le dos
On restera debout, on sera les plus hauts !

[Build-up vers refrain final]`;
            } else {
                return `Oh oh oh, oh oh oh
Le futur nous appartient
Oh oh oh, oh oh oh
On tient le monde dans nos mains
(Build-up instrumental)`;
            }
        }

        function generateInstrumentation(genre) {
            switch(genre) {
                case 'pop':
                    return `â€¢ Batterie Ã©lectronique
â€¢ Basse synthÃ©
â€¢ Piano/SynthÃ©s
â€¢ Guitares (subtiles)
â€¢ Percussions additionnelles`;
                case 'rock':
                    return `â€¢ Batterie acoustique (Ã©nergique)
â€¢ Basse Ã©lectrique
â€¢ Guitare Ã©lectrique lead
â€¢ Guitare Ã©lectrique rythmique
â€¢ Ã‰ventuellement claviers`;
                case 'rap':
                    return `â€¢ Beat/BoÃ®te Ã  rythmes
â€¢ 808 Bass
â€¢ Samples
â€¢ Hi-hats
â€¢ Snares percutants`;
                case 'rnb':
                    return `â€¢ Batterie avec groove
â€¢ Basse profonde
â€¢ Piano Ã©lectrique/Rhodes
â€¢ SynthÃ©s pads
â€¢ Percussions subtiles`;
                case 'electro':
                    return `â€¢ Kicks puissants
â€¢ SynthÃ©s lead
â€¢ Basse Ã©lectronique
â€¢ Pads atmosphÃ©riques
â€¢ Effets sonores (FX)`;
                case 'folk':
                    return `â€¢ Guitare acoustique
â€¢ Harmonica (optionnel)
â€¢ Contrebasse ou basse acoustique
â€¢ Percussions lÃ©gÃ¨res
â€¢ Violon (optionnel)`;
                case 'jazz':
                    return `â€¢ Piano
â€¢ Contrebasse
â€¢ Batterie (balais)
â€¢ Saxophone (optionnel)
â€¢ Trompette (optionnel)`;
                case 'metal':
                    return `â€¢ Double grosse caisse
â€¢ Basse heavy
â€¢ Guitares distordues (drop tuning)
â€¢ Guitare lead/solos
â€¢ Ã‰ventuellement claviers`;
                default:
                    return `â€¢ Instrumentation standard du genre
â€¢ Arrangement adaptÃ© au style
â€¢ Production moderne`;
            }
        }

        function downloadConcept() {
            const blob = new Blob([generatedConcept], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `concept_${selectedType}_${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function restart() {
            document.getElementById('detailsForm').reset();
            selectedType = '';
            generatedConcept = '';
            artistsData = [];
            projectData = {};
            goToStep(1);
        }
    </script>
</body>
</html>
